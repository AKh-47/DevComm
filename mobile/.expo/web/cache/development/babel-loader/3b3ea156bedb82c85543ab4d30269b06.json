{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nvar _jsxFileName = \"/home/akhilkala/Desktop/App/DevComm/mobile/components/chat/Room.tsx\";\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  background-color: #333;\\n  flex: 1;\\n  color: #fefefe;\\n  font-weight: bold;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 24px;\\n  padding-right: 10px;\\n  padding-left: 10px;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  height: 100%;\\n  font-size: 25px;\\n  padding: 15px;\\n  flex: 2;\\n  width: 100%;\\n  border-radius: 500px;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  background-color: #222;\\n  flex: 1;\\n  /* padding-top: 20px; */\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  height: 60px;\\n  background-color: #333;\\n  flex-direction: row;\\n  align-items: center;\\n  padding-left: 20px;\\n  padding-right: 20px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  height: 50px;\\n  background-color: #333;\\n  flex-direction: row;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  margin-left: 20px;\\n  font-size: 30px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState } from \"react\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport styled from \"styled-components/native\";\nimport { View, TextInput, Text } from \"../../styles\";\nimport useInputState from \"../../hooks/useInputState\";\nimport Message from \"./Message\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport Loading from \"../Loading\";\nimport { GET } from \"../../utils/request\";\nimport { useRooms } from \"../../context/RoomsContext\";\nimport { useAuth } from \"../../context/AuthContext\";\nvar RoomDiv = styled(View)(_templateObject());\nvar RoomTopText = styled(Text)(_templateObject2());\nvar RoomBottom = styled(View)(_templateObject3());\nvar RoomTop = styled(View)(_templateObject4());\nvar RoomChat = styled(ScrollView)(_templateObject5());\nvar RoomInput = styled(TextInput)(_templateObject6());\nvar SendButton = styled(View)(_templateObject7());\nexport default function Room(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useInputState = useInputState(),\n      _useInputState2 = _slicedToArray(_useInputState, 3),\n      message = _useInputState2[0],\n      setMessage = _useInputState2[1],\n      resetMessage = _useInputState2[2];\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      room = _useState4[0],\n      setRoom = _useState4[1];\n\n  var roomContext = useRooms();\n  var auth = useAuth();\n\n  var viewProfileHandler = function viewProfileHandler() {\n    navigation.navigate(\"Profile\", {\n      currentUser: false\n    });\n  };\n\n  useEffect(function () {\n    var roomID = route.params.roomID;\n    GET(\"/rooms/\" + roomID).then(function (room) {\n      setRoom(room);\n      setLoading(false);\n    }).catch(function (err) {});\n  }, []);\n\n  var goBackHandler = function goBackHandler() {\n    if (!room) return;\n    navigation.goBack();\n    roomContext == null ? void 0 : roomContext.leaveRoom(room == null ? void 0 : room._id);\n  };\n\n  if (loading) return React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }\n  });\n  return React.createElement(RoomDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, React.createElement(RoomTop, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: goBackHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(AntDesign, {\n    name: \"back\",\n    size: 28,\n    color: \"#fefefe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  })), React.createElement(RoomTopText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, room == null ? void 0 : room.name)), React.createElement(RoomChat, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, React.createElement(Message, {\n    right: true,\n    viewProfileHandler: viewProfileHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"This works da\"), room == null ? void 0 : room.messages.map(function (message) {\n    var _auth$currentUser;\n\n    return React.createElement(Message, {\n      right: message.user._id === (auth == null ? void 0 : (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser._id),\n      viewProfileHandler: viewProfileHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, message.message);\n  })), React.createElement(RoomBottom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, React.createElement(RoomInput, {\n    value: message,\n    onChangeText: setMessage,\n    placeholder: \"Type a message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, React.createElement(SendButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Send\"))));\n}","map":{"version":3,"sources":["/home/akhilkala/Desktop/App/DevComm/mobile/components/chat/Room.tsx"],"names":["React","useEffect","useState","styled","View","TextInput","Text","useInputState","Message","AntDesign","Loading","GET","useRooms","useAuth","RoomDiv","RoomTopText","RoomBottom","RoomTop","RoomChat","ScrollView","RoomInput","SendButton","Room","navigation","route","message","setMessage","resetMessage","loading","setLoading","room","setRoom","roomContext","auth","viewProfileHandler","navigate","currentUser","roomID","params","then","catch","err","goBackHandler","goBack","leaveRoom","_id","name","messages","map","user"],"mappings":"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","sourcesContent":["import React, { ReactElement, useEffect, useState } from \"react\";\nimport { TouchableOpacity, ScrollView } from \"react-native\";\n\nimport styled from \"styled-components/native\";\nimport { View, H1, TextInput, Text } from \"../../styles\";\nimport useInputState from \"../../hooks/useInputState\";\nimport Message from \"./Message\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport NavHeader from \"../NavHeader\";\nimport Loading from \"../Loading\";\nimport { Nullable, Room as IRoom } from \"../../utils/types\";\nimport { GET } from \"../../utils/request\";\nimport { useRooms } from \"../../context/RoomsContext\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nconst RoomDiv = styled(View)`\n  flex: 1;\n`;\n\nconst RoomTopText = styled(Text)`\n  margin-left: 20px;\n  font-size: 30px;\n`;\n\nconst RoomBottom = styled(View)`\n  height: 50px;\n  background-color: #333;\n  flex-direction: row;\n`;\n\nconst RoomTop = styled(View)`\n  height: 60px;\n  background-color: #333;\n  flex-direction: row;\n  align-items: center;\n  padding-left: 20px;\n  padding-right: 20px;\n`;\n\nconst RoomChat = styled(ScrollView)`\n  background-color: #222;\n  flex: 1;\n  /* padding-top: 20px; */\n`;\n\nconst RoomInput = styled(TextInput)`\n  height: 100%;\n  font-size: 25px;\n  padding: 15px;\n  flex: 2;\n  width: 100%;\n  border-radius: 500px;\n`;\n\nconst SendButton = styled(View)`\n  background-color: #333;\n  flex: 1;\n  color: #fefefe;\n  font-weight: bold;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  padding-right: 10px;\n  padding-left: 10px;\n`;\n\ninterface Props {\n  navigation: any;\n  route: any;\n}\n\nexport default function Room({ navigation, route }: Props): ReactElement {\n  const [message, setMessage, resetMessage] = useInputState();\n\n  const [loading, setLoading] = useState(true);\n  const [room, setRoom] = useState<Nullable<IRoom>>(null);\n\n  const roomContext = useRooms();\n  const auth = useAuth();\n\n  const viewProfileHandler = () => {\n    navigation.navigate(\"Profile\", { currentUser: false });\n  };\n\n  useEffect(() => {\n    const roomID = route.params.roomID;\n\n    GET(`/rooms/${roomID}`)\n      .then((room) => {\n        setRoom(room);\n        setLoading(false);\n      })\n      .catch((err) => {\n        // setLoading(false);\n      });\n  }, []);\n\n  const goBackHandler = () => {\n    if (!room) return;\n    navigation.goBack();\n    roomContext?.leaveRoom(room?._id);\n  };\n\n  if (loading) return <Loading />;\n  return (\n    <RoomDiv>\n      {/* <NavHeader backHandler={navigation.goBack}>React</NavHeader> */}\n      <RoomTop>\n        <TouchableOpacity onPress={goBackHandler}>\n          <AntDesign name=\"back\" size={28} color=\"#fefefe\" />\n        </TouchableOpacity>\n        <RoomTopText>{room?.name}</RoomTopText>\n      </RoomTop>\n\n      <RoomChat>\n        <Message right viewProfileHandler={viewProfileHandler}>\n          This works da\n        </Message>\n        {room?.messages.map((message) => (\n          <Message\n            right={message.user._id === auth?.currentUser?._id}\n            viewProfileHandler={viewProfileHandler}\n          >\n            {message.message}\n          </Message>\n        ))}\n      </RoomChat>\n\n      <RoomBottom>\n        <RoomInput\n          value={message}\n          onChangeText={setMessage}\n          placeholder=\"Type a message\"\n        />\n        <TouchableOpacity onPress={() => {}}>\n          <SendButton>Send</SendButton>\n        </TouchableOpacity>\n      </RoomBottom>\n    </RoomDiv>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}